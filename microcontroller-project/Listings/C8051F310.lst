A51 MACRO ASSEMBLER  C8051F310                                                            11/15/2017 18:41:37 PAGE     1


MACRO ASSEMBLER A51 V8.2.5.0
OBJECT MODULE PLACED IN .\Objects\C8051F310.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE asm\C8051F310.asm NOMOD51 SET(SMALL) DEBUG PRINT(.\Listings\C8051F310.l
                      st) OBJECT(.\Objects\C8051F310.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     ; 08H~1FH:  local variables(arguments) & global variables

                       2     ; 20H~27H:  bits (00H~3FH)

                       3     ; 30H~7FH:  stack & global variables

                       4     

                       5     ; A,B,C:      volatile

                       6     

                       7     

                       8     ;$include (C8051F310.INC)

                +1     9     ;---------------------------------------------------------------------------

                +1    10     ;  

                +1    11     ;  

                +1    12     ;

                +1    13     ;

                +1    14     ;  FILE NAME   : C8051F310.INC

                +1    15     ;  TARGET MCUs : C8051F310, 'F311

                +1    16     ;  DESCRIPTION : Register/bit definitions for the C8051F31x product family.

                +1    17     ;

                +1    18     ;  REVISION 1.3

                +1    19     ;     -- added ESPI0 and PSPI0

                +1    20     ;  REVISION 1.2

                +1    21     ;     -- added VDM0CN (0xff)   

                +1    22     ;

                +1    23     ;  REVISION 1.1

                +1    24     ;     -- changed TARGET MCUs to 'F310, 'F311

                +1    25     ;     -- SPICFG --> SPI0CFG

                +1    26     ;     -- SPICKR --> SPI0CKR

                +1    27     ;     -- SPIDAT --> SPI0DAT

                +1    28     ;     -- removed CLKMUL (0xb9)

                +1    29     ;     -- AMUX0N --> AMX0N

                +1    30     ;     -- AMUX0P --> AMX0P

                +1    31     ;

                +1    32     ;---------------------------------------------------------------------------

                +1    33     

                +1    34     ; BYTE Registers 

  0080          +1    35     P0       DATA  080H     ; PORT 0                                                   

  0081          +1    36     SP       DATA  081H     ; STACK POINTER                                            

  0082          +1    37     DPL      DATA  082H     ; DATA POINTER - LOW BYTE                                  

  0083          +1    38     DPH      DATA  083H     ; DATA POINTER - HIGH BYTE                                 

  0087          +1    39     PCON     DATA  087H     ; POWER CONTROL                                            

  0088          +1    40     TCON     DATA  088H     ; TIMER CONTROL                                            

  0089          +1    41     TMOD     DATA  089H     ; TIMER MODE                                               

  008A          +1    42     TL0      DATA  08AH     ; TIMER 0 - LOW BYTE                                       

  008B          +1    43     TL1      DATA  08BH     ; TIMER 1 - LOW BYTE                                       

  008C          +1    44     TH0      DATA  08CH     ; TIMER 0 - HIGH BYTE                                      

  008D          +1    45     TH1      DATA  08DH     ; TIMER 1 - HIGH BYTE                                      

  008E          +1    46     CKCON    DATA  08EH     ; CLOCK CONTROL                                            

  008F          +1    47     PSCTL    DATA  08FH     ; PROGRAM STORE R/W CONTROL                                

  0090          +1    48     P1       DATA  090H     ; PORT 1                                                   

  0091          +1    49     TMR3CN   DATA  091H     ; TIMER 3 CONTROL                                          

  0092          +1    50     TMR3RLL  DATA  092H     ; TIMER 3 RELOAD LOW                                       

  0093          +1    51     TMR3RLH  DATA  093H     ; TIMER 3 RELOAD HIGH                                      

  0094          +1    52     TMR3L    DATA  094H     ; TIMER 3 LOW BYTE                                         

  0095          +1    53     TMR3H    DATA  095H     ; TIMER 3 HIGH BYTE                                        

  0098          +1    54     SCON0    DATA  098H     ; SERIAL PORT 0 CONTROL                                    

  0099          +1    55     SBUF0    DATA  099H     ; SERIAL PORT 0 BUFFER                                     

  009A          +1    56     CPT1CN   DATA  09AH     ; COMPARATOR 1 CONTROL                                     

  009B          +1    57     CPT0CN   DATA  09BH     ; COMPARATOR 0 CONTROL                                     

A51 MACRO ASSEMBLER  C8051F310                                                            11/15/2017 18:41:37 PAGE     2

  009C          +1    58     CPT1MD   DATA  09CH     ; COMPARATOR 1 MODE                                        

  009D          +1    59     CPT0MD   DATA  09DH     ; COMPARATOR 0 MODE                                        

  009E          +1    60     CPT1MX   DATA  09EH     ; COMPARATOR 1 MUX                                         

  009F          +1    61     CPT0MX   DATA  09FH     ; COMPARATOR 0 MUX                                         

  00A0          +1    62     P2       DATA  0A0H     ; PORT 2                                                   

  00A1          +1    63     SPI0CFG  DATA  0A1H     ; SPI0 CONFIGURATION                                        

  00A2          +1    64     SPI0CKR  DATA  0A2H     ; SPI0 CLOCK CONFIGURATION                                  

  00A3          +1    65     SPI0DAT  DATA  0A3H     ; SPI0 DATA                                         

  00A4          +1    66     P0MDOUT  DATA  0A4H     ; PORT 0 OUTPUT MODE                                       

  00A5          +1    67     P1MDOUT  DATA  0A5H     ; PORT 1 OUTPUT MODE                                       

  00A6          +1    68     P2MDOUT  DATA  0A6H     ; PORT 2 OUTPUT MODE                                       

  00A7          +1    69     P3MDOUT  DATA  0A7H     ; PORT 3 OUTPUT MODE                                       

  00A8          +1    70     IE       DATA  0A8H     ; INTERRUPT ENABLE                                         

  00A9          +1    71     CLKSEL   DATA  0A9H     ; CLOCK SOURCE SELECT                                      

  00AA          +1    72     EMI0CN   DATA  0AAH     ; EXTERNAL MEMORY INTERFACE CONTROL                        

  00B0          +1    73     P3       DATA  0B0H     ; PORT 3                                                   

  00B1          +1    74     OSCXCN   DATA  0B1H     ; EXTERNAL OSCILLATOR CONTROL                              

  00B2          +1    75     OSCICN   DATA  0B2H     ; INTERNAL OSCILLATOR CONTROL                              

  00B3          +1    76     OSCICL   DATA  0B3H     ; INTERNAL OSCILLATOR CALIBRATION                          

  00B5          +1    77     FLACL    DATA  0B5H     ; FLASH ACCESS LIMIT

  00B6          +1    78     FLSCL    DATA  0B6H     ; FLASH SCALE                                              

  00B7          +1    79     FLKEY    DATA  0B7H     ; FLASH LOCK & KEY                                         

  00B8          +1    80     IP       DATA  0B8H     ; INTERRUPT PRIORITY   

  00BA          +1    81     AMX0N    DATA  0BAH     ; ADC0 MUX NEGATIVE CHANNEL SELECTION                      

  00BB          +1    82     AMX0P    DATA  0BBH     ; ADC0 MUX POSITIVE CHANNEL SELECTION                      

  00BC          +1    83     ADC0CF   DATA  0BCH     ; ADC0 CONFIGURATION                                       

  00BD          +1    84     ADC0L    DATA  0BDH     ; ADC0 DATA LOW                                            

  00BE          +1    85     ADC0H    DATA  0BEH     ; ADC0 DATA HIGH                                           

  00C0          +1    86     SMB0CN   DATA  0C0H     ; SMBUS CONTROL                                            

  00C1          +1    87     SMB0CF   DATA  0C1H     ; SMBUS CONFIGURATION                                      

  00C2          +1    88     SMB0DAT  DATA  0C2H     ; SMBUS DATA                                             

  00C3          +1    89     ADC0GTL  DATA  0C3H     ; ADC0 GREATER-THAN LOW                                    

  00C4          +1    90     ADC0GTH  DATA  0C4H     ; ADC0 GREATER-THAN HIGH                                   

  00C5          +1    91     ADC0LTL  DATA  0C5H     ; ADC0 LESS-THAN LOW                                       

  00C6          +1    92     ADC0LTH  DATA  0C6H     ; ADC0 LESS-THAN HIGH                                      

  00C8          +1    93     TMR2CN   DATA  0C8H     ; TIMER 2 CONTROL                                                

  00CA          +1    94     TMR2RLL  DATA  0CAH     ; TIMER 2 RELOAD LOW                                       

  00CB          +1    95     TMR2RLH  DATA  0CBH     ; TIMER 2 RELOAD HIGH                                      

  00CC          +1    96     TMR2L    DATA  0CCH     ; TIMER 2 LOW BYTE                                         

  00CD          +1    97     TMR2H    DATA  0CDH     ; TIMER 2 HIGH BYTE                                        

  00D0          +1    98     PSW      DATA  0D0H     ; PROGRAM STATUS WORD                                      

  00D1          +1    99     REF0CN   DATA  0D1H     ; VOLTAGE REFERENCE 0 CONTROL                              

  00D4          +1   100     P0SKIP   DATA  0D4H     ; PORT 0 CROSSBAR SKIP                                     

  00D5          +1   101     P1SKIP   DATA  0D5H     ; PORT 1 CROSSBAR SKIP                                     

  00D6          +1   102     P2SKIP   DATA  0D6H     ; PORT 2 CROSSBAR SKIP     

  00D8          +1   103     PCA0CN   DATA  0D8H     ; PCA0 CONTROL                                             

  00D9          +1   104     PCA0MD   DATA  0D9H     ; PCA0 MODE                                                

  00DA          +1   105     PCA0CPM0 DATA  0DAH     ; PCA0 MODULE 0 MODE                                       

  00DB          +1   106     PCA0CPM1 DATA  0DBH     ; PCA0 MODULE 1 MODE                                       

  00DC          +1   107     PCA0CPM2 DATA  0DCH     ; PCA0 MODULE 2 MODE     

  00DD          +1   108     PCA0CPM3 DATA  0DDH     ; PCA0 MODULE 3 MODE                                       

  00DE          +1   109     PCA0CPM4 DATA  0DEH     ; PCA0 MODULE 4 MODE                                    

  00E0          +1   110     ACC      DATA  0E0H     ; ACCUMULATOR                                              

  00E1          +1   111     XBR0     DATA  0E1H     ; DIGITAL CROSSBAR CONFIGURATION REGISTER 0                

  00E2          +1   112     XBR1     DATA  0E2H     ; DIGITAL CROSSBAR CONFIGURATION REGISTER 1                

  00E4          +1   113     IT01CF   DATA  0E4H     ; INT0/INT1 CONFIGURATION                                  

  00E6          +1   114     EIE1     DATA  0E6H     ; EXTERNAL INTERRUPT ENABLE 1                     

  00E8          +1   115     ADC0CN   DATA  0E8H     ; ADC 0 CONTROL                                            

  00E9          +1   116     PCA0CPL1 DATA  0E9H     ; PCA0 MODULE 1 CAPTURE/COMPARE REGISTER LOW BYTE          

  00EA          +1   117     PCA0CPH1 DATA  0EAH     ; PCA0 MODULE 1 CAPTURE/COMPARE REGISTER HIGH BYTE         

  00EB          +1   118     PCA0CPL2 DATA  0EBH     ; PCA0 MODULE 2 CAPTURE/COMPARE REGISTER LOW BYTE          

  00EC          +1   119     PCA0CPH2 DATA  0ECH     ; PCA0 MODULE 2 CAPTURE/COMPARE REGISTER HIGH BYTE         

  00ED          +1   120     PCA0CPL3 DATA  0EDH     ; PCA0 MODULE 3 CAPTURE/COMPARE REGISTER LOW BYTE          

  00EE          +1   121     PCA0CPH3 DATA  0EEH     ; PCA0 MODULE 3 CAPTURE/COMPARE REGISTER HIGH BYTE         

  00EF          +1   122     RSTSRC   DATA  0EFH     ; RESET SOURCE                                             

  00F0          +1   123     B        DATA  0F0H     ; B REGISTER                                               

A51 MACRO ASSEMBLER  C8051F310                                                            11/15/2017 18:41:37 PAGE     3

  00F1          +1   124     P0MDIN   DATA  0F1H     ; PORT 0 INPUT MODE REGISTER                               

  00F2          +1   125     P1MDIN   DATA  0F2H     ; PORT 1 INPUT MODE REGISTER                               

  00F3          +1   126     P2MDIN   DATA  0F3H     ; PORT 2 INPUT MODE REGISTER                               

  00F4          +1   127     P3MDIN   DATA  0F4H     ; PORT 3 INPUT MODE REGISTER                               

  00F6          +1   128     EIP1     DATA  0F6H     ; EXTERNAL INTERRUPT PRIORITY 1

  00F8          +1   129     SPI0CN   DATA  0F8H     ; SPI0 CONTROL                                             

  00F9          +1   130     PCA0L    DATA  0F9H     ; PCA0 COUNTER REGISTER LOW BYTE                           

  00FA          +1   131     PCA0H    DATA  0FAH     ; PCA0 COUNTER REGISTER HIGH BYTE                          

  00FB          +1   132     PCA0CPL0 DATA  0FBH     ; PCA MODULE 0 CAPTURE/COMPARE REGISTER LOW BYTE           

  00FC          +1   133     PCA0CPH0 DATA  0FCH     ; PCA MODULE 0 CAPTURE/COMPARE REGISTER HIGH BYTE          

  00FD          +1   134     PCA0CPL4 DATA  0FDH     ; PCA MODULE 4 CAPTURE/COMPARE REGISTER LOW BYTE           

  00FE          +1   135     PCA0CPH4 DATA  0FEH     ; PCA MODULE 4 CAPTURE/COMPARE REGISTER HIGH BYTE      

  00FF          +1   136     VDM0CN    DATA  0FFH ; VDD MONITOR CONTROL

                +1   137     

                +1   138     ;------------------------------------------------------------------------------

                +1   139     ;BIT DEFINITIONS

                +1   140     ;

                +1   141     ; TCON 88H

  0088          +1   142     IT0      BIT   TCON.0   ; EXT. INTERRUPT 0 TYPE

  0089          +1   143     IE0      BIT   TCON.1   ; EXT. INTERRUPT 0 EDGE FLAG

  008A          +1   144     IT1      BIT   TCON.2   ; EXT. INTERRUPT 1 TYPE

  008B          +1   145     IE1      BIT   TCON.3   ; EXT. INTERRUPT 1 EDGE FLAG

  008C          +1   146     TR0      BIT   TCON.4   ; TIMER 0 ON/OFF CONTROL

  008D          +1   147     TF0      BIT   TCON.5   ; TIMER 0 OVERFLOW FLAG

  008E          +1   148     TR1      BIT   TCON.6   ; TIMER 1 ON/OFF CONTROL

  008F          +1   149     TF1      BIT   TCON.7   ; TIMER 1 OVERFLOW FLAG

                +1   150     

                +1   151     ; SCON0  0x98 

  0098          +1   152     RI0      BIT   SCON0.0  ; RECEIVE INTERRUPT FLAG                                

  0099          +1   153     TI0      BIT   SCON0.1  ; TRANSMIT INTERRUPT FLAG                               

  009A          +1   154     RB80     BIT   SCON0.2  ; RECEIVE BIT 8                                         

  009B          +1   155     TB80     BIT   SCON0.3  ; TRANSMIT BIT 8                                        

  009C          +1   156     REN0     BIT   SCON0.4  ; RECEIVE ENABLE                                        

  009D          +1   157     MCE0     BIT   SCON0.5  ; MULTIPROCESSOR COMMUNICATION ENABLE                   

  009F          +1   158     S0MODE   BIT   SCON0.7  ; SERIAL MODE CONTROL BIT 0                             

                +1   159     

                +1   160     ; IE  0xA8 

  00A8          +1   161     EX0      BIT   IE.0     ; EXTERNAL INTERRUPT 0 ENABLE                           

  00A9          +1   162     ET0      BIT   IE.1     ; TIMER 0 INTERRUPT ENABLE                              

  00AA          +1   163     EX1      BIT   IE.2     ; EXTERNAL INTERRUPT 1 ENABLE                           

  00AB          +1   164     ET1      BIT   IE.3     ; TIMER 1 INTERRUPT ENABLE                              

  00AC          +1   165     ES0      BIT   IE.4     ; UART0 INTERRUPT ENABLE                                

  00AD          +1   166     ET2      BIT   IE.5     ; TIMER 2 INTERRUPT ENABLE                              

  00AE          +1   167     ESPI0    BIT   IE.6     ; SPI0 INTERRUPT ENABLE

  00AF          +1   168     EA       BIT   IE.7     ; GLOBAL INTERRUPT ENABLE                               

                +1   169     

                +1   170     ; IP  0xB8 

  00B8          +1   171     PX0      BIT   IP.0     ; EXTERNAL INTERRUPT 0 PRIORITY                         

  00B9          +1   172     PT0      BIT   IP.1     ; TIMER 0 PRIORITY                                      

  00BA          +1   173     PX1      BIT   IP.2     ; EXTERNAL INTERRUPT 1 PRIORITY                         

  00BB          +1   174     PT1      BIT   IP.3     ; TIMER 1 PRIORITY                                      

  00BC          +1   175     PS0      BIT   IP.4     ; UART0 PRIORITY                                        

  00BD          +1   176     PT2      BIT   IP.5     ; TIMER 2 PRIORITY                                      

  00BE          +1   177     PSPI0    BIT   IP.6     ; SPI0 INTERRUPT PRIORITY

                +1   178     

                +1   179     ; SMB0CN 0xC0 

  00C0          +1   180     SI       BIT   SMB0CN.0 ; SMBUS0 INTERRUPT FLAG                                 

  00C1          +1   181     ACK      BIT   SMB0CN.1 ; ACKNOWLEDGE FLAG                                      

  00C2          +1   182     ARBLOST  BIT   SMB0CN.2 ; ARBITRATION LOST INDICATOR                            

  00C3          +1   183     ACKRQ    BIT   SMB0CN.3 ; ACKNOWLEDGE REQUEST                                   

  00C4          +1   184     STO      BIT   SMB0CN.4 ; STOP FLAG                                             

  00C5          +1   185     STA      BIT   SMB0CN.5 ; START FLAG                                            

  00C6          +1   186     TXMODE   BIT   SMB0CN.6 ; TRANSMIT MODE INDICATOR                               

  00C7          +1   187     MASTER   BIT   SMB0CN.7 ; MASTER/SLAVE INDICATOR                                

                +1   188     

                +1   189     ; TMR2CN 0xC8 

A51 MACRO ASSEMBLER  C8051F310                                                            11/15/2017 18:41:37 PAGE     4

  00C8          +1   190     T2XCLK   BIT   TMR2CN.0 ; TIMER 2 EXTERNAL CLOCK SELECT                         

  00CA          +1   191     TR2      BIT   TMR2CN.2 ; TIMER 2 ON/OFF CONTROL                                

  00CB          +1   192     T2SPLIT  BIT   TMR2CN.3 ; TIMER 2 SPLIT MODE ENABLE                             

  00CD          +1   193     TF2LEN   BIT   TMR2CN.5 ; TIMER 2 LOW BYTE INTERRUPT ENABLE                     

  00CE          +1   194     TF2L     BIT   TMR2CN.6 ; TIMER 2 LOW BYTE OVERFLOW FLAG                        

  00CF          +1   195     TF2H     BIT   TMR2CN.7 ; TIMER 2 HIGH BYTE OVERFLOW FLAG                       

                +1   196     

                +1   197     ; PSW 0xD0 

  00D0          +1   198     P        BIT   PSW.0    ; ACCUMULATOR PARITY FLAG                               

  00D1          +1   199     F1       BIT   PSW.1    ; USER FLAG 1                                           

  00D2          +1   200     OV       BIT   PSW.2    ; OVERFLOW FLAG                                         

  00D3          +1   201     RS0      BIT   PSW.3    ; REGISTER BANK SELECT 0                                

  00D4          +1   202     RS1      BIT   PSW.4    ; REGISTER BANK SELECT 1                                

  00D5          +1   203     F0       BIT   PSW.5    ; USER FLAG 0                                           

  00D6          +1   204     AC       BIT   PSW.6    ; AUXILIARY CARRY FLAG                                  

  00D7          +1   205     CY       BIT   PSW.7    ; CARRY FLAG                                            

                +1   206     

                +1   207     ; PCA0CN 0xD8H 

  00D8          +1   208     CCF0     BIT   PCA0CN.0 ; PCA0 MODULE 0 CAPTURE/COMPARE FLAG                    

  00D9          +1   209     CCF1     BIT   PCA0CN.1 ; PCA0 MODULE 1 CAPTURE/COMPARE FLAG                    

  00DA          +1   210     CCF2     BIT   PCA0CN.2 ; PCA0 MODULE 2 CAPTURE/COMPARE FLAG                    

  00DB          +1   211     CCF3     BIT   PCA0CN.3 ; PCA0 MODULE 3 CAPTURE/COMPARE FLAG                    

  00DC          +1   212     CCF4     BIT   PCA0CN.4 ; PCA0 MODULE 4 CAPTURE/COMPARE FLAG                    

  00DE          +1   213     CR       BIT   PCA0CN.6 ; PCA0 COUNTER RUN CONTROL                              

  00DF          +1   214     CF       BIT   PCA0CN.7 ; PCA0 COUNTER OVERFLOW FLAG                            

                +1   215     

                +1   216     ; ADC0CN 0xE8H 

  00E8          +1   217     AD0CM0   BIT   ADC0CN.0 ; ADC0 CONVERSION MODE SELECT 0                         

  00E9          +1   218     AD0CM1   BIT   ADC0CN.1 ; ADC0 CONVERSION MODE SELECT 1                         

  00EA          +1   219     AD0CM2   BIT   ADC0CN.2 ; ADC0 CONVERSION MODE SELECT 2                         

  00EB          +1   220     AD0WINT  BIT   ADC0CN.3 ; ADC0 WINDOW COMPARE INTERRUPT FLAG                    

  00EC          +1   221     AD0BUSY  BIT   ADC0CN.4 ; ADC0 BUSY FLAG                                        

  00ED          +1   222     AD0INT   BIT   ADC0CN.5 ; ADC0 CONVERISION COMPLETE INTERRUPT FLAG              

  00EE          +1   223     AD0TM    BIT   ADC0CN.6 ; ADC0 TRACK MODE                                       

  00EF          +1   224     AD0EN    BIT   ADC0CN.7 ; ADC0 ENABLE                                           

                +1   225     

                +1   226     ; SPI0CN 0xF8H 

  00FF          +1   227     SPIF     BIT   SPI0CN.7 ; SPI 0 INTERRUPT FLAG                                  

  00FE          +1   228     WCOL     BIT   SPI0CN.6 ; SPI 0 WRITE COLLISION FLAG                            

  00FD          +1   229     MODF     BIT   SPI0CN.5 ; SPI 0 MODE FAULT FLAG                                 

  00FC          +1   230     RXOVRN   BIT   SPI0CN.4 ; SPI 0 RX OVERRUN FLAG                                 

  00FB          +1   231     NSSMD1   BIT   SPI0CN.3 ; SPI 0 SLAVE SELECT MODE 1                             

  00FA          +1   232     NSSMD0   BIT   SPI0CN.2 ; SPI 0 SLAVE SELECT MODE 0                             

  00F9          +1   233     TXBMT    BIT   SPI0CN.1 ; SPI 0 TRANSMIT BUFFER EMPTY                           

  00F8          +1   234     SPIEN    BIT   SPI0CN.0 ; SPI 0 SPI ENABLE                                      

                     235     

                     236     EXTRN CODE (MAIN)

                     237     ;EXTRN CODE (INT_EXT0)

                     238     ;EXTRN CODE (INT_TIM0)

                     239     ;EXTRN CODE (INT_EXT1)

                     240     ;EXTRN CODE (INT_TIM1)

                     241     EXTRN CODE (INT_TIM2)

                     242     

                     243     

                     244             

----                 245             CSEG AT 0000H

                     246                     

0000                 247             ORG             0000H

0000 020141          248             LJMP    Init_Device 

                     249             

0003                 250             ORG             0003H

                     251             ;LJMP   INT_EXT0

                     252             

000B                 253             ORG             000BH

                     254             ;LJMP   INT_TIM0

                     255             

A51 MACRO ASSEMBLER  C8051F310                                                            11/15/2017 18:41:37 PAGE     5

0013                 256             ORG             0013H

                     257             ;LJMP   INT_EXT1

                     258             

001B                 259             ORG             001BH

                     260             ;LJMP   INT_TIM1

                     261             

002B                 262             ORG             002BH         ;Timer2_Overflow

002B 020000   F      263             LJMP    INT_TIM2

                     264     

                     265     ;------------------------------------------------------------------------

                     266     ;-  Generated Initialization File                                      --

                     267     ;------------------------------------------------------------------------

                     268     

                     269     ; Peripheral specific initialization functions,

                     270     ; Called from the Init_Device label

                     271     

                     272     

0100                 273             ORG             0100H

                     274     

0100                 275     Mem_Init:

0100 7802            276             MOV             R0,#02H

0102 7926            277             MOV             R1,#26H

0104                 278     ClearMem:

0104 7600            279             MOV             @R0,#00H

0106 08              280             INC             R0

0107 D9FB            281             DJNZ    R1,ClearMem

0109 7800            282             MOV             R0,#00H

010B 7900            283             MOV             R1,#00H

010D 22              284             RET

                     285                     

                     286                     

                     287                     

010E                 288     PCA_Init:

010E 53D9BF          289         ANL  PCA0MD,    #0BFh

0111 75D900          290         MOV  PCA0MD,    #000h

0114 22              291         RET

                     292     

0115                 293     Timer_Init:

0115 758901          294         MOV  TMOD,      #001h

0118 758E02          295         MOV  CKCON,     #002h

011B 22              296         RET

                     297     

011C                 298     Port_IO_Init:

                     299         ; P0.0  -  Unassigned,  Push-Pull,  Digital

                     300         ; P0.1  -  Unassigned,  Open-Drain, Digital

                     301         ; P0.2  -  Unassigned,  Open-Drain, Digital

                     302         ; P0.3  -  Unassigned,  Open-Drain, Digital

                     303         ; P0.4  -  Unassigned,  Open-Drain, Digital

                     304         ; P0.5  -  Unassigned,  Open-Drain, Digital

                     305         ; P0.6  -  Unassigned,  Open-Drain, Digital

                     306         ; P0.7  -  Unassigned,  Open-Drain, Digital

                     307     

                     308         ; P1.0  -  Unassigned,  Open-Drain, Digital

                     309         ; P1.1  -  Unassigned,  Open-Drain, Digital

                     310         ; P1.2  -  Unassigned,  Open-Drain, Digital

                     311         ; P1.3  -  Unassigned,  Open-Drain, Digital

                     312         ; P1.4  -  Unassigned,  Open-Drain, Digital

                     313         ; P1.5  -  Unassigned,  Open-Drain, Digital

                     314         ; P1.6  -  Unassigned,  Open-Drain, Digital

                     315         ; P1.7  -  Unassigned,  Open-Drain, Digital

                     316         ; P2.0  -  Unassigned,  Open-Drain, Digital

                     317         ; P2.1  -  Unassigned,  Open-Drain, Digital

                     318         ; P2.2  -  Unassigned,  Open-Drain, Digital

                     319         ; P2.3  -  Unassigned,  Open-Drain, Digital

                     320     

                     321     

A51 MACRO ASSEMBLER  C8051F310                                                            11/15/2017 18:41:37 PAGE     6

011C C282            322             CLR       P0.2                                                  ;XTAL1

011E C283            323             CLR       P0.3                                                  ;XTAL2

0120 75F1F3          324             MOV   P0MDIN,#11110011B                         ;P0.2 and P0.3 are analog input por
                             ts

0123 75D40C          325             MOV   P0SKIP,#00001100B                         ;P0.2 and P0.3 are skipped by the C
                             rossbar

                     326     

0126 75A401          327         MOV  P0MDOUT,   #001h

0129 75A702          328         MOV  P3MDOUT,   #002h

012C 75E240          329         MOV  XBR1,      #040h

                     330     

                     331             

012F C2B1            332             CLR   P3.1                                                      ;BEEP

                     333             

0131 22              334         RET

                     335     

                     336     

0132                 337     Clocks_Init:

                     338     

0132 75B2C3          339             MOV   OSCICN,#11000011B                         ;SYSCLK derived from Internal Oscil
                             lator divided by 1

0135 75B167          340             MOV   OSCXCN,#01100111B                         ;Crystal Oscillator Mode

                     341     

0138 787F            342             MOV   R0,#07FH

013A                 343     WAIT0:

013A 79FF            344             MOV       R1,#0FFH

013C                 345     WAIT1:

013C D9FE            346             DJNZ  R1,WAIT1

013E D8FA            347             DJNZ  R0,WAIT0                                          ;Wait for the startup of th
                             e external oscillator

0140 22              348             RET

                     349     

                     350     

                     351     

                     352     ; Initialization function for device,

                     353     ; Call Init_Device from your main program

0141                 354     Init_Device:

0141 75812F          355             MOV   SP,#2FH

                     356     

0144 120100          357             LCALL Mem_Init

0147 12010E          358         LCALL PCA_Init

014A 12011C          359         LCALL Port_IO_Init

014D 120132          360             LCALL Clocks_Init

0150 120115          361         LCALL Timer_Init

                     362     

                     363     

                     364             

                     365             

0153 120000   F      366             LCALL MAIN

0156 80FE            367             SJMP    $

                     368     

                     369             END

A51 MACRO ASSEMBLER  C8051F310                                                            11/15/2017 18:41:37 PAGE     7

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

AC . . . . . . . .  B ADDR   00D0H.6 A   
ACC. . . . . . . .  D ADDR   00E0H   A   
ACK. . . . . . . .  B ADDR   00C0H.1 A   
ACKRQ. . . . . . .  B ADDR   00C0H.3 A   
AD0BUSY. . . . . .  B ADDR   00E8H.4 A   
AD0CM0 . . . . . .  B ADDR   00E8H.0 A   
AD0CM1 . . . . . .  B ADDR   00E8H.1 A   
AD0CM2 . . . . . .  B ADDR   00E8H.2 A   
AD0EN. . . . . . .  B ADDR   00E8H.7 A   
AD0INT . . . . . .  B ADDR   00E8H.5 A   
AD0TM. . . . . . .  B ADDR   00E8H.6 A   
AD0WINT. . . . . .  B ADDR   00E8H.3 A   
ADC0CF . . . . . .  D ADDR   00BCH   A   
ADC0CN . . . . . .  D ADDR   00E8H   A   
ADC0GTH. . . . . .  D ADDR   00C4H   A   
ADC0GTL. . . . . .  D ADDR   00C3H   A   
ADC0H. . . . . . .  D ADDR   00BEH   A   
ADC0L. . . . . . .  D ADDR   00BDH   A   
ADC0LTH. . . . . .  D ADDR   00C6H   A   
ADC0LTL. . . . . .  D ADDR   00C5H   A   
AMX0N. . . . . . .  D ADDR   00BAH   A   
AMX0P. . . . . . .  D ADDR   00BBH   A   
ARBLOST. . . . . .  B ADDR   00C0H.2 A   
B. . . . . . . . .  D ADDR   00F0H   A   
CCF0 . . . . . . .  B ADDR   00D8H.0 A   
CCF1 . . . . . . .  B ADDR   00D8H.1 A   
CCF2 . . . . . . .  B ADDR   00D8H.2 A   
CCF3 . . . . . . .  B ADDR   00D8H.3 A   
CCF4 . . . . . . .  B ADDR   00D8H.4 A   
CF . . . . . . . .  B ADDR   00D8H.7 A   
CKCON. . . . . . .  D ADDR   008EH   A   
CLEARMEM . . . . .  C ADDR   0104H   A   
CLKSEL . . . . . .  D ADDR   00A9H   A   
CLOCKS_INIT. . . .  C ADDR   0132H   A   
CPT0CN . . . . . .  D ADDR   009BH   A   
CPT0MD . . . . . .  D ADDR   009DH   A   
CPT0MX . . . . . .  D ADDR   009FH   A   
CPT1CN . . . . . .  D ADDR   009AH   A   
CPT1MD . . . . . .  D ADDR   009CH   A   
CPT1MX . . . . . .  D ADDR   009EH   A   
CR . . . . . . . .  B ADDR   00D8H.6 A   
CY . . . . . . . .  B ADDR   00D0H.7 A   
DPH. . . . . . . .  D ADDR   0083H   A   
DPL. . . . . . . .  D ADDR   0082H   A   
EA . . . . . . . .  B ADDR   00A8H.7 A   
EIE1 . . . . . . .  D ADDR   00E6H   A   
EIP1 . . . . . . .  D ADDR   00F6H   A   
EMI0CN . . . . . .  D ADDR   00AAH   A   
ES0. . . . . . . .  B ADDR   00A8H.4 A   
ESPI0. . . . . . .  B ADDR   00A8H.6 A   
ET0. . . . . . . .  B ADDR   00A8H.1 A   
ET1. . . . . . . .  B ADDR   00A8H.3 A   
ET2. . . . . . . .  B ADDR   00A8H.5 A   
EX0. . . . . . . .  B ADDR   00A8H.0 A   
EX1. . . . . . . .  B ADDR   00A8H.2 A   
F0 . . . . . . . .  B ADDR   00D0H.5 A   
F1 . . . . . . . .  B ADDR   00D0H.1 A   
FLACL. . . . . . .  D ADDR   00B5H   A   
FLKEY. . . . . . .  D ADDR   00B7H   A   
FLSCL. . . . . . .  D ADDR   00B6H   A   
A51 MACRO ASSEMBLER  C8051F310                                                            11/15/2017 18:41:37 PAGE     8

IE . . . . . . . .  D ADDR   00A8H   A   
IE0. . . . . . . .  B ADDR   0088H.1 A   
IE1. . . . . . . .  B ADDR   0088H.3 A   
INIT_DEVICE. . . .  C ADDR   0141H   A   
INT_TIM2 . . . . .  C ADDR   -----       EXT
IP . . . . . . . .  D ADDR   00B8H   A   
IT0. . . . . . . .  B ADDR   0088H.0 A   
IT01CF . . . . . .  D ADDR   00E4H   A   
IT1. . . . . . . .  B ADDR   0088H.2 A   
MAIN . . . . . . .  C ADDR   -----       EXT
MASTER . . . . . .  B ADDR   00C0H.7 A   
MCE0 . . . . . . .  B ADDR   0098H.5 A   
MEM_INIT . . . . .  C ADDR   0100H   A   
MODF . . . . . . .  B ADDR   00F8H.5 A   
NSSMD0 . . . . . .  B ADDR   00F8H.2 A   
NSSMD1 . . . . . .  B ADDR   00F8H.3 A   
OSCICL . . . . . .  D ADDR   00B3H   A   
OSCICN . . . . . .  D ADDR   00B2H   A   
OSCXCN . . . . . .  D ADDR   00B1H   A   
OV . . . . . . . .  B ADDR   00D0H.2 A   
P. . . . . . . . .  B ADDR   00D0H.0 A   
P0 . . . . . . . .  D ADDR   0080H   A   
P0MDIN . . . . . .  D ADDR   00F1H   A   
P0MDOUT. . . . . .  D ADDR   00A4H   A   
P0SKIP . . . . . .  D ADDR   00D4H   A   
P1 . . . . . . . .  D ADDR   0090H   A   
P1MDIN . . . . . .  D ADDR   00F2H   A   
P1MDOUT. . . . . .  D ADDR   00A5H   A   
P1SKIP . . . . . .  D ADDR   00D5H   A   
P2 . . . . . . . .  D ADDR   00A0H   A   
P2MDIN . . . . . .  D ADDR   00F3H   A   
P2MDOUT. . . . . .  D ADDR   00A6H   A   
P2SKIP . . . . . .  D ADDR   00D6H   A   
P3 . . . . . . . .  D ADDR   00B0H   A   
P3MDIN . . . . . .  D ADDR   00F4H   A   
P3MDOUT. . . . . .  D ADDR   00A7H   A   
PCA0CN . . . . . .  D ADDR   00D8H   A   
PCA0CPH0 . . . . .  D ADDR   00FCH   A   
PCA0CPH1 . . . . .  D ADDR   00EAH   A   
PCA0CPH2 . . . . .  D ADDR   00ECH   A   
PCA0CPH3 . . . . .  D ADDR   00EEH   A   
PCA0CPH4 . . . . .  D ADDR   00FEH   A   
PCA0CPL0 . . . . .  D ADDR   00FBH   A   
PCA0CPL1 . . . . .  D ADDR   00E9H   A   
PCA0CPL2 . . . . .  D ADDR   00EBH   A   
PCA0CPL3 . . . . .  D ADDR   00EDH   A   
PCA0CPL4 . . . . .  D ADDR   00FDH   A   
PCA0CPM0 . . . . .  D ADDR   00DAH   A   
PCA0CPM1 . . . . .  D ADDR   00DBH   A   
PCA0CPM2 . . . . .  D ADDR   00DCH   A   
PCA0CPM3 . . . . .  D ADDR   00DDH   A   
PCA0CPM4 . . . . .  D ADDR   00DEH   A   
PCA0H. . . . . . .  D ADDR   00FAH   A   
PCA0L. . . . . . .  D ADDR   00F9H   A   
PCA0MD . . . . . .  D ADDR   00D9H   A   
PCA_INIT . . . . .  C ADDR   010EH   A   
PCON . . . . . . .  D ADDR   0087H   A   
PORT_IO_INIT . . .  C ADDR   011CH   A   
PS0. . . . . . . .  B ADDR   00B8H.4 A   
PSCTL. . . . . . .  D ADDR   008FH   A   
PSPI0. . . . . . .  B ADDR   00B8H.6 A   
PSW. . . . . . . .  D ADDR   00D0H   A   
PT0. . . . . . . .  B ADDR   00B8H.1 A   
PT1. . . . . . . .  B ADDR   00B8H.3 A   
PT2. . . . . . . .  B ADDR   00B8H.5 A   
PX0. . . . . . . .  B ADDR   00B8H.0 A   
A51 MACRO ASSEMBLER  C8051F310                                                            11/15/2017 18:41:37 PAGE     9

PX1. . . . . . . .  B ADDR   00B8H.2 A   
RB80 . . . . . . .  B ADDR   0098H.2 A   
REF0CN . . . . . .  D ADDR   00D1H   A   
REN0 . . . . . . .  B ADDR   0098H.4 A   
RI0. . . . . . . .  B ADDR   0098H.0 A   
RS0. . . . . . . .  B ADDR   00D0H.3 A   
RS1. . . . . . . .  B ADDR   00D0H.4 A   
RSTSRC . . . . . .  D ADDR   00EFH   A   
RXOVRN . . . . . .  B ADDR   00F8H.4 A   
S0MODE . . . . . .  B ADDR   0098H.7 A   
SBUF0. . . . . . .  D ADDR   0099H   A   
SCON0. . . . . . .  D ADDR   0098H   A   
SI . . . . . . . .  B ADDR   00C0H.0 A   
SMB0CF . . . . . .  D ADDR   00C1H   A   
SMB0CN . . . . . .  D ADDR   00C0H   A   
SMB0DAT. . . . . .  D ADDR   00C2H   A   
SP . . . . . . . .  D ADDR   0081H   A   
SPI0CFG. . . . . .  D ADDR   00A1H   A   
SPI0CKR. . . . . .  D ADDR   00A2H   A   
SPI0CN . . . . . .  D ADDR   00F8H   A   
SPI0DAT. . . . . .  D ADDR   00A3H   A   
SPIEN. . . . . . .  B ADDR   00F8H.0 A   
SPIF . . . . . . .  B ADDR   00F8H.7 A   
STA. . . . . . . .  B ADDR   00C0H.5 A   
STO. . . . . . . .  B ADDR   00C0H.4 A   
T2SPLIT. . . . . .  B ADDR   00C8H.3 A   
T2XCLK . . . . . .  B ADDR   00C8H.0 A   
TB80 . . . . . . .  B ADDR   0098H.3 A   
TCON . . . . . . .  D ADDR   0088H   A   
TF0. . . . . . . .  B ADDR   0088H.5 A   
TF1. . . . . . . .  B ADDR   0088H.7 A   
TF2H . . . . . . .  B ADDR   00C8H.7 A   
TF2L . . . . . . .  B ADDR   00C8H.6 A   
TF2LEN . . . . . .  B ADDR   00C8H.5 A   
TH0. . . . . . . .  D ADDR   008CH   A   
TH1. . . . . . . .  D ADDR   008DH   A   
TI0. . . . . . . .  B ADDR   0098H.1 A   
TIMER_INIT . . . .  C ADDR   0115H   A   
TL0. . . . . . . .  D ADDR   008AH   A   
TL1. . . . . . . .  D ADDR   008BH   A   
TMOD . . . . . . .  D ADDR   0089H   A   
TMR2CN . . . . . .  D ADDR   00C8H   A   
TMR2H. . . . . . .  D ADDR   00CDH   A   
TMR2L. . . . . . .  D ADDR   00CCH   A   
TMR2RLH. . . . . .  D ADDR   00CBH   A   
TMR2RLL. . . . . .  D ADDR   00CAH   A   
TMR3CN . . . . . .  D ADDR   0091H   A   
TMR3H. . . . . . .  D ADDR   0095H   A   
TMR3L. . . . . . .  D ADDR   0094H   A   
TMR3RLH. . . . . .  D ADDR   0093H   A   
TMR3RLL. . . . . .  D ADDR   0092H   A   
TR0. . . . . . . .  B ADDR   0088H.4 A   
TR1. . . . . . . .  B ADDR   0088H.6 A   
TR2. . . . . . . .  B ADDR   00C8H.2 A   
TXBMT. . . . . . .  B ADDR   00F8H.1 A   
TXMODE . . . . . .  B ADDR   00C0H.6 A   
VDM0CN . . . . . .  D ADDR   00FFH   A   
WAIT0. . . . . . .  C ADDR   013AH   A   
WAIT1. . . . . . .  C ADDR   013CH   A   
WCOL . . . . . . .  B ADDR   00F8H.6 A   
XBR0 . . . . . . .  D ADDR   00E1H   A   
XBR1 . . . . . . .  D ADDR   00E2H   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
